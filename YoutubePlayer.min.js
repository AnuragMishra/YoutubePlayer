(function(global){function YoutubePlayer(elementId,videoId,extra){this.id=elementId;this.videoId=videoId;this.handlers={};this.ref=null;this.width='425';this.height='356';this.flashVersion='8';this.params={allowScriptAccess:'always'};this.attrs={id:this.id};var mergeExtras=function(from,into){for(var key in from){into[key]=from[key];}};if(extra){if(extra.params)
mergeExtras(extra.params,this.params);if(extra.attrs)
mergeExtras(extra.attrs,this.attrs);if(extra.width)
this.width=extra.width;if(extra.height)
this.height=extra.height;if(extra.flashVersion)
this.flashVersion=extra.flashVersion;}
this.embed();YoutubePlayer.register(this);}
YoutubePlayer.prototype.embed=function(){var videoUrl='http://www.youtube.com/v/{videoId}?enablejsapi=1&playerapiid={playerId}';videoUrl=videoUrl.replace('{videoId}',this.videoId);videoUrl=videoUrl.replace('{playerId}',this.id);if(!swfobject){throw new ReferenceError('YoutubePlayer depends on the SWFObject library but it is missing.');}
var player=this;swfobject.embedSWF(videoUrl,this.id,this.width,this.height,this.flashVersion,null,null,this.params,this.attrs,function(e){player.ref=e.ref;});};YoutubePlayer.prototype.on=function(eventName,handler){this.handlers[eventName]=this.handlers[eventName]||[];this.handlers[eventName].push(handler);};YoutubePlayer.prototype.onReady=function(){var player=document.getElementById(this.id);var callbackStr='YoutubePlayer.dispatchEvent("{id}")';var callback=callbackStr.replace("{id}",this.id);player.addEventListener('onStateChange',callback);};YoutubePlayer.prototype.notifyEvent=function(eventId){var states=YoutubePlayer.STATES;for(var eventName in states){if(states[eventName]==eventId){this.fireEvent(eventName);}}};YoutubePlayer.prototype.fireEvent=function(eventName){var handlers=this.handlers[eventName];if(!handlers){return;}
for(var i=0;i<handlers.length;i++){handlers[i](eventName);}};YoutubePlayer.instances=[];YoutubePlayer.register=function(player){this.instances.push(player);};YoutubePlayer.findById=function(playerId){var player=null;for(var i=0;i<this.instances.length;i++){if(this.instances[i].id==playerId){player=this.instances[i];}}
return player;};YoutubePlayer.dispatchEvent=function(playerId){var player=YoutubePlayer.findById(playerId);return function(eventId){player.notifyEvent(eventId);};};YoutubePlayer.STATES={unstarted:-1,ended:0,playing:1,paused:2,buffering:3,cued:5};global.YoutubePlayer=YoutubePlayer;global.onYouTubePlayerReady=function(playerId){YoutubePlayer.findById(playerId).onReady();};})(window);